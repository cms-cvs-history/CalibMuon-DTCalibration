process PROD = {

    include "CondCore/DBCommon/data/CondDBSetup.cfi"

    #Mapping    
    es_source mapping = PoolDBESSource { 
	using CondDBSetup
	string connect = "sqlite_file:map.db"
	untracked string catalog = "file:map.xml"
	string timetype = "runnumber"    
	untracked uint32 authenticationMethod = 0
	VPSet toGet = {
	    {string record = "DTReadOutMappingRcd"
		string tag = "channelsMap"}
	}
    }
    
    # Event Formatter
    source = DaqSource{ string reader = "DTROS8FileReader"
	untracked int32 maxEvents = 3000
	PSet pset = {  string fileName ="/data/c/cerminar/scratch0/LocalReco/data/mb3_c20_TP_3777" } 
    }
    
    include "FWCore/MessageService/data/MessageLogger.cfi"
    
    # Data Unpacker
    module dtunpacker = DTUnpackingModule{ 
	string dataType = "ROS8" }
    
    include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    
    #Service to write DB
    service = PoolDBOutputService{
	string connect = "sqlite_file:tzero.db"    	
	untracked string catalog = "file:tzero.xml"	
	string timetype = "runnumber"    
	untracked uint32 authenticationMethod = 0
	PSet DBParameters = {}
	VPSet toPut={{
		string record = "DTT0Rcd"
		string tag ="tzero"
	    }}
    }
    
    #Module to calibrate tzeros
    module t0calib = DTT0Calibration {
	# Switch on/off the verbosity
	untracked bool debug = false
	# Label to retrieve DT digis from the event
	string digiLabel = "dtunpacker"
	# Name of the ROOT file which will contain the time boxes
	untracked string rootFileName = "DTT0.root"
    }	
    
    path p = {dtunpacker, t0calib}

}

