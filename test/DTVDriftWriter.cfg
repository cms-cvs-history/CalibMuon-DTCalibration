process DTVDriftWriterFromRecSegment = {
    
    source = EmptySource {untracked int32 maxEvents = 1}
    
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"

    #Service to write vDrift in the DB
    service = PoolDBOutputService{
	string connect = "sqlite_file:vDrift.db"    	
	untracked string catalog = "file:vDrift.xml"
	string timetype = "runnumber"    
	untracked uint32 authenticationMethod = 0
	PSet DBParameters = {}
	VPSet toPut={{
	        string record = "DTMtimeRcd"
		string tag ="vDrift"
	    }}
    }
    
    #Module to compute vdrift and hit resolution
    module dtvdriftwriter = DTVDriftWriter  {
	# Switch on/off the verbosity
	untracked bool debug = true
	# Name of the ROOT file which contains the TMax histos
	untracked string rootFileName = "DTTMaxHistos_final.root"
	# Name of the txt file which will contain the calibrated v_drift
	untracked string  vDriftFileName = "DTVDriftCalibration.txt"
	#  Parameter set for  DTCalibrationMap constructor
	untracked PSet calibFileConfig = {
	    # Chosen granularity (N.B. bySL is the only one implemented for calibration at the moment)  
	    untracked string calibConstGranularity = "bySL"
	}
    }
    
    path p = {dtvdriftwriter}

}


