process PROD = {
        

	include "Mapping_PoolDBESSource.cfi"
      	
	#for global run
	include "DaqSource_Global.cfi"
    	replace  PoolSource.maxEvents = 10
	include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
	#if campo off
	#es_module = UniformMagneticFieldESProducer {double ZFieldInTesla = 0.0}

	#for local run
     	#include "DaqSource_DTUnpackingModule.cfi"
	#replace  DaqSource.maxEvents = 100000

	include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
	include "Geometry/DTGeometry/data/dtGeometry.cfi"

	# The tzero from DB
	include "TZero_PoolDBESSource.cfi"

	#The noisy channels from DB
	include "Noise_PoolDBESSource.cfi"


	service = PoolDBOutputService{
	  string connect = "sqlite_file:ttrig_4398.db"    
          string timetype = "runnumber"    
	  untracked uint32 authenticationMethod = 0
	  untracked string catalog = "file:ttrig_4398.xml"
	  VPSet toPut={{
			untracked string containerName = "DTDBObject"
          		string tag ="ttrig"
			}}
	}


	module ttrigcalib = DTTTrigCalibration {
		# Switch on/off the verbosity
		untracked bool debug = false
		
		# Label to retrieve DT digis from the event
		untracked string digiLabel = "dtunpacker"
		# Name of the ROOT file which will contain the time boxes
		untracked string rootFileName = "DTTimeBoxes.root"
		# trigger source (0,...,5 = DT,CSC,RPC,DT+CSC,DT+RPC,all)
	        untracked int32 triggerSource = 5
		# Switch on/off the subtraction of t0 from pulses
		untracked bool doSubtractT0 = true
		# Switch on/off the DB writing
		untracked bool findTMeanAndSigma = true
		# Switch for the check of noisy channels
		untracked bool checkNoisyChannels = true

		# Module for t0 subtraction
		untracked string tTrigMode = 'DTTTrigSyncT0Only'
		# Parameter set for t0 subtraction module
		untracked PSet tTrigModeConfig = {
			untracked bool debug = false
		}
	}	
	


  
	path p = {dtunpacker, ttrigcalib}

}

