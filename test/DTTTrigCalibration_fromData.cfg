process PROD = {

	#Mapping
	es_source = PoolDBESSource { VPSet toGet = {
                                      {string record = "DTReadOutMappingRcd" 
                                       string tag = "mb3_10_map"}
                                     }
		    		     bool loadAll = true
				     string connect = "sqlite_file:mb3_10.db"
				     untracked string catalog = "file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/commissioning/mb3/mb3catalog.xml"
			             string timetype = "runnumber" 
				     untracked uint32 authenticationMethod = 0
				     untracked uint32 messagelevel = 3
				   }

	# Event Formatter
	source = DaqSource{ string reader = "DTROS8FileReader"
	   	untracked int32 maxEvents = 100
			PSet pset = {  string fileName ="/data/c/cerminar/scratch0/MBCommissioning/data/mb3_c12_3089" } 
	}
	
	# Data Unpacker
	module dtunpacker = DTUnpackingModule{ 
		string dataType = "ROS8" }

	es_source = PoolDBESSource {  VPSet toGet = {
        	                    {string record = "DTT0Rcd" 
                                     string tag = "cmssw_T0"
                                     } }
                                     bool loadAll = true
                                     string connect = "sqlite_file:test.db"
                                     untracked string catalog = "file:testcatalog.xml"
                                     string timetype = "runnumber" 
                                    }

	include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
	include "Geometry/DTGeometry/data/dtGeometry.cfi"


	module ttrigcalib = DTTTrigCalibration {
		untracked bool debug = true
		string digiLabel = "dtunpacker"
		untracked string rootFileName = "DTTimeBoxes.root"
		# DB related parametrs
		string connect = "sqlite_file:./dtttrig_test.db"
		string catalog = "file:dtttrig_test.xml"
		string tag = "cmssw_ttrig"
		# The DB message level 0 = Error, 1 = Warning, 2 = Info, 3 = Debug
		untracked uint32 messageLevel = 3
		# The authenticatio method: 0 = env, 1 = xml
		uint32 authenticationMethod = 0
		# The env variables CORAL_AUTH_USER and CORAL_AUTH_PASSWORD
		untracked string coralUser = ""
		untracked string coralPasswd = ""
		bool doSubtractT0 = false
		string tTrigMode = 'DTTTrigSyncT0Only'
		PSet tTrigModeConfig = {
			untracked bool debug = true
		}
	}	


  
	path p = {dtunpacker, ttrigcalib}

}

