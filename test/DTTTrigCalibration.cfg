process TTRIGCALIBPROC = {
    
    include "CondCore/DBCommon/data/CondDBSetup.cfi"
    
    #Event data source
    source = PoolSource {
	untracked vstring fileNames = {
	    'rfio:/castor/cern.ch/user/j/jfernan2/AlCaReco_Zmumu_131/AlCaReco_Zmumu_131_1.root'
	}
	untracked uint32 debugVebosity = 10
	untracked bool   debugFlag     = true
    }
    untracked PSet maxEvents = {untracked int32 input = -1}

    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    
    #Service to write in the DB
    service = PoolDBOutputService{
	string connect = "sqlite_file:ttrig.db"    	
	untracked string timetype = "runnumber"     
	untracked uint32 authenticationMethod = 0
	PSet DBParameters = {}
	VPSet toPut={{
		string record = "DTTtrigRcd"
		string tag ="ttrig"
	    }}
    } 
    
    #Module to calibrate ttrig
    module ttrigcalib = DTTTrigCalibration {
	# Switch on/off the verbosity
	untracked bool debug = false
	# Switch on/off the DB writing
	untracked bool fitAndWrite = false
	# Label to retrieve DT digis from the event
	untracked string digiLabel = "muonDTDigis"#"muondtdigi" 
	# Name of the ROOT file which will contain the time boxes
	untracked string rootFileName = "DTTimeBoxes.root"
	# Switch on/off the subtraction of t0 from pulses
	untracked bool doSubtractT0 = false
	
	# Switch for the check of noisy channels
	untracked bool checkNoisyChannels = false
	
	# Module for t0 subtraction
	untracked string tTrigMode = ''
	# Parameter set for t0 subtraction module
	untracked PSet tTrigModeConfig = {
	}
    }	
    
    path p = {ttrigcalib}

}

