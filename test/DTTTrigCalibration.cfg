process TTRIGCALIBPROC = {
    
    include "CondCore/DBCommon/data/CondDBSetup.cfi"
    
    #Event data source
    source = PoolSource {
	untracked vstring fileNames = {
	    'file:/data/simuSamples/2CF7563E-DC33-DB11-BE97-000E0C3F13F1.root'
	    #'file:/data/simuSamples/mu_single_mu_pt_10-100_negative_10k.root'
	    #'file:/data/simuSamples/mu_single_mu_pt_10-100_positive_10k.root'
	}
	untracked int32 maxEvents = -1
	untracked uint32 debugVebosity = 10
	untracked bool   debugFlag     = true
    }
    
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    
    #Service to write in the DB
    service = PoolDBOutputService{
	string connect = "sqlite_file:ttrig.db"    	
	untracked string catalog = "file:ttrig.xml"	
	string timetype = "runnumber"    
	untracked uint32 authenticationMethod = 0
	PSet DBParameters = {
	    untracked string authenticationPath="."
	    untracked int32 messageLevel=0
	    untracked bool loadBlobStreamer = false
	    untracked bool enableConnectionSharing = true
	    untracked int32 connectionTimeOut = 600
	    untracked int32 connectionRetrialPeriod = 30
	    untracked int32 connectionRetrialTimeOut = 180
	}
	VPSet toPut={{
		string record = "DTTtrigRcd"
		string tag ="ttrig"
	    }}
    } 
    
    #Module to calibrate ttrig
    module ttrigcalib = DTTTrigCalibration {
	# Switch on/off the verbosity
	untracked bool debug = true
	# Switch on/off the DB writing
	untracked bool findTMeanAndSigma = false
	# Label to retrieve DT digis from the event
	untracked string digiLabel = "muondtdigi" #"muonDTDigis"
	# Name of the ROOT file which will contain the time boxes
	untracked string rootFileName = "DTTimeBoxes.root"
	# Switch on/off the subtraction of t0 from pulses
	untracked bool doSubtractT0 = false
	
	# Switch for the check of noisy channels
	untracked bool checkNoisyChannels = false
	
	# Module for t0 subtraction
	untracked string tTrigMode = ''
	# Parameter set for t0 subtraction module
	untracked PSet tTrigModeConfig = {
	}
    }	
    
    path p = {ttrigcalib}

}

